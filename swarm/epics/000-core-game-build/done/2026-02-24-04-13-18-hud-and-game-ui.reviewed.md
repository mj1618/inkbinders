# Task: HUD & Game UI System — In-Game Interface

## Overview

Build a comprehensive **in-game HUD (Heads-Up Display)** system and a **pause menu**, with a test page at `/test/hud`. This is a Phase 6 integration task — it brings together health, abilities, combat, and world state into a cohesive player-facing interface rendered directly on the canvas.

Currently, each test page renders its own ad-hoc HUD elements: `PlayerHealth.renderHUD()` draws minimal heart shapes, the day/night test page has a clock HUD, and abilities render their own status bars inline. There is no unified HUD system. This task creates a centralized `GameHUD` class that:

1. Renders a consistent, polished in-game overlay on the canvas
2. Displays health, ability cooldowns, weapon state, room info, and minimap
3. Provides a pause menu (ESC) with resume/quit options
4. Handles transient notifications (gate opened, ability unlocked, item collected)
5. Is a pure engine class (no React dependencies) that any test page or the real game can use

**Core design principle:** The HUD is a single `GameHUD` class that takes references to all the game systems (health, abilities, combat, day/night) and renders their state. It does NOT modify any game systems — it's read-only. The HUD adapts to what systems are available (null-safe) so it works in test pages that only have a subset of systems active.

**Why now:** The world assembly task creates a basic room name + minimap. The save system creates a slot UI. But neither provides the in-game HUD needed when actually playing. Before we can build the main menu / game start flow, we need the HUD to exist. This task also creates the pause menu, which is the first step toward a game loop that isn't just "reload the page."

## Dependencies

- `PlayerHealth` (`src/engine/combat/PlayerHealth.ts`) — health state ✅
- `CombatSystem` (`src/engine/combat/CombatSystem.ts`) — weapon + attack state ✅
- `MarginStitch`, `Redaction`, `PasteOver`, `IndexMark` (`src/engine/abilities/`) — ability state ✅
- `DayNightCycle` (`src/engine/world/DayNightCycle.ts`) — time of day state ✅
- `Camera` (`src/engine/core/Camera.ts`) — for minimap positioning ✅
- `InputManager`, `InputAction` (`src/engine/input/InputManager.ts`) — pause input ✅
- `Player` entity — state machine state, velocity, position ✅
- Canvas rendering infrastructure ✅

## What to Build

### 1. `GameHUD` Class (`src/engine/ui/GameHUD.ts`)

The main HUD class. Renders all HUD elements in screen-space (after camera transform is reset).

```typescript
export interface GameHUDConfig {
  /** Which HUD elements to show. All default to true. */
  showHealth?: boolean;
  showAbilities?: boolean;
  showWeapon?: boolean;
  showClock?: boolean;
  showRoomName?: boolean;
  showMinimap?: boolean;
  showNotifications?: boolean;
}

export interface GameHUDSystems {
  /** Player health — null if not available */
  health: PlayerHealth | null;
  /** Combat system — null if not available */
  combat: CombatSystem | null;
  /** Abilities — any can be null if not wired */
  marginStitch: MarginStitch | null;
  redaction: Redaction | null;
  pasteOver: PasteOver | null;
  indexMark: IndexMark | null;
  /** Day/night cycle — null if not available */
  dayNight: DayNightCycle | null;
  /** Input manager — required for pause detection */
  input: InputManager;
}

export class GameHUD {
  config: GameHUDConfig;
  systems: GameHUDSystems;

  // Pause state
  paused: boolean;
  pauseMenuSelection: number;  // 0 = Resume, 1 = Quit

  // Notification queue
  private notifications: HUDNotification[];

  // Room name display
  private roomNameText: string;
  private roomNameTimer: number;  // Frames remaining to show room name

  constructor(systems: GameHUDSystems, config?: Partial<GameHUDConfig>);

  /** Update HUD state. Call once per frame. */
  update(dt: number): void;

  /** Check and toggle pause state from input. Returns true if game is paused. */
  checkPause(): boolean;

  /** Handle pause menu input (up/down selection, confirm). Returns selected action or null. */
  handlePauseInput(): PauseAction | null;

  /** Show a room name card (fades in, holds, fades out) */
  showRoomName(name: string): void;

  /** Push a notification message (queued, shown one at a time) */
  notify(message: string, type?: NotificationType): void;

  /**
   * Render the full HUD overlay.
   * Call in screen-space (after ctx.restore() from camera transform).
   */
  render(ctx: CanvasRenderingContext2D, canvasWidth: number, canvasHeight: number): void;

  /**
   * Render the pause menu overlay (dims game, shows menu).
   * Only renders when paused.
   */
  renderPauseMenu(ctx: CanvasRenderingContext2D, canvasWidth: number, canvasHeight: number): void;
}

export type PauseAction = "resume" | "quit";
export type NotificationType = "info" | "ability" | "gate" | "item" | "warning";

export interface HUDNotification {
  message: string;
  type: NotificationType;
  timer: number;  // Remaining display frames
  alpha: number;  // Current opacity (for fade in/out)
}
```

### 2. HUD Layout Specification

The HUD is rendered in screen-space on a 960×540 canvas. All positions are fixed relative to the canvas edges.

```
┌─────────────────────────────────────────────────────────────────┐
│ [Health]                                         [Clock/Time]   │
│ ♥ ♥ ♥ ♥ ♡                                      ☀ Day 2:15     │
│                                                                 │
│                                                                 │
│                                                                 │
│                                                                 │
│                                                                 │
│                                                                 │
│                                                                 │
│                                                                 │
│                                                                 │
│                                                                 │
│                                                   [Minimap]     │
│                                                   ┌────────┐   │
│                                                   │ rooms   │   │
│                                                   └────────┘   │
│ [Notifications]                                                 │
│ "Gate opened!"                                                  │
│                                                                 │
│ [Abilities]               [Weapon]           [Room Name]        │
│ [E] [Q] [R] [R]          ⟨spear⟩            Archive Passage    │
│ Stitch Red Paste Index                                          │
└─────────────────────────────────────────────────────────────────┘
```

**Specific layout positions:**

| Element | Position | Size | Notes |
|---------|----------|------|-------|
| Health bar | Top-left (16, 12) | Up to 5 hearts × 20px | Pixel-art style hearts |
| Clock/time | Top-right (right-aligned, 16px from right edge) | ~120×24 | Sun/moon icon + time + phase name |
| Ability bar | Bottom-left (16, canvas.height - 56) | 4 slots × 44px wide | Keybind label + cooldown overlay |
| Weapon indicator | Bottom-center (canvas.width/2, canvas.height - 56) | 80×44 | Current weapon icon + name |
| Room name | Bottom-right (right-aligned, canvas.height - 40) | text | Fades in/out on room entry |
| Minimap | Right side (canvas.width - 180, canvas.height - 180) | 160×120 | Optional, only when config says so |
| Notifications | Left side, above ability bar (16, canvas.height - 100) | text | Slide up + fade out |

### 3. Health Bar Rendering

Improved version of the current `PlayerHealth.renderHUD()`. Instead of pixel-art hearts (which are hard to read), use a clean bar-style health display:

```
Design:
  ┌─────────────────────────────────────────┐
  │ ██████████████████████░░░░░░░░░░░░░░░░ │  ← HP bar
  │ 3 / 5                                   │  ← HP text
  └─────────────────────────────────────────┘

  - Background: dark gray (#1f1f1f) rounded rect
  - Fill: red (#ef4444) for current HP, dark red (#7f1d1d) for missing HP
  - When recently damaged: flash white for 6 frames
  - Low health (1 HP): fill pulses between red and orange
  - Width: 120px, Height: 12px
  - HP number text below the bar: "3 / 5" in small white text
```

**HP bar specifics:**
- `BAR_X = 16`, `BAR_Y = 12`
- `BAR_WIDTH = 120`, `BAR_HEIGHT = 12`
- Fill width = `(health / maxHealth) * BAR_WIDTH`
- Damage flash: when `invincibilityTimer > invincibilityFrames - 6`, fill is white
- Low health pulse: when `health === 1`, alpha oscillates between 0.6 and 1.0 at 4Hz

### 4. Ability Bar Rendering

Four ability slots at the bottom-left. Each slot shows:
- Keybind letter (E, Q, R, R) at the top
- Ability icon (simple glyph drawn on canvas)
- Cooldown overlay (dark sweep that covers the slot proportional to remaining cooldown)
- Active count indicator (small dots or number for abilities with multiple active instances)
- Dim/gray when ability is on cooldown, bright when ready

```
Design for one ability slot:
  ┌──────┐
  │  [E] │  ← keybind label (10px font)
  │ ╔══╗ │
  │ ║  ║ │  ← ability icon area (24×24)
  │ ╚══╝ │
  │ •••  │  ← active count dots (e.g., 2/3 redactions active)
  └──────┘
  Width: 40px, Height: 52px, spacing: 4px between slots

  Cooldown: dark semi-transparent overlay sweeps down from top
  Active: bright border glow
  On cooldown: desaturated, dark overlay with timer text
```

**Ability state reading (from the explore agent's findings):**

| Ability | Cooldown Source | Active Count Source | Max Count |
|---------|----------------|---------------------|-----------|
| MarginStitch | `cooldownTimer` / params.`stitchCooldown` | 0 or 1 (`activeStitch !== null`) | 1 |
| Redaction | `cooldownTimer` / params.`redactionCooldown` | `activeRedactions.length` | params.`maxActiveRedactions` |
| PasteOver | `cooldownTimer` / params.`pasteCooldown` | `activePastes.length` | params.`maxActivePastes` |
| IndexMark | `cooldownTimer` / params.`teleportCooldown` | `marks.length` | params.`maxMarks` |

**Ability icon glyphs (simple canvas-drawn symbols):**
- **Margin Stitch:** Two vertical lines with a horizontal bridge (like a stitch between walls)
- **Redaction:** A black rectangle with a red X through it (erasure)
- **Paste-Over:** A paintbrush or stamp shape (surface application)
- **Index Mark:** A bookmark/pin shape (navigation)

These are 24×24px canvas-drawn icons — simple geometric shapes, no images needed.

### 5. Weapon Indicator

Bottom-center. Shows which weapon is active.

```
Design:
  ┌─────────────────┐
  │   ⟨quill-spear⟩ │
  │    ─────►       │  ← directional line for spear, or * burst for snap
  │    [K] switch   │  ← switch keybind hint
  └─────────────────┘
```

- **Quill-spear:** Draw a diagonal line with a pointed tip (like a spear/quill)
- **Ink snap:** Draw a small starburst/asterisk shape (snap/burst)
- Active weapon is bright, inactive is dim
- Show `[K]` switch hint in small text
- If combat system is null, don't render

**Weapon state reading:**
- `combat.currentWeapon` → "quill-spear" or "ink-snap"
- `combat.attackPhase` → animate the icon during attacks (brief flash/scale)
- `combat.cooldownTimer > 0` → dim overlay

### 6. Day/Night Clock

Top-right corner. Shows current time of day with a simple clock display.

```
Design:
  ☀ Day  1:15     ← sun icon during day, moon during night
    [───●────]    ← progress bar through the day/night cycle
```

- Icon: simple drawn circle for sun (filled yellow), crescent for moon (white)
- Phase name: "Dawn", "Day", "Dusk", "Night"
- Time: minutes:seconds formatted from the cycle's current time
- Progress bar: small horizontal bar showing position in the current phase
- If dayNight system is null, don't render

**Clock state reading:**
- `dayNight.getTimeOfDay()` → phase name
- `dayNight.currentTime` → normalized time (0-1) for progress bar
- `dayNight.getLightLevel()` → could tint the clock text

### 7. Room Name Display

When `showRoomName(name)` is called (e.g., on room transition), the room name fades in, holds for ~2 seconds, then fades out. Positioned bottom-right.

```
Timing:
  - Fade in: 20 frames (0.33s)
  - Hold: 120 frames (2s)
  - Fade out: 30 frames (0.5s)
  - Total: 170 frames (~2.83s)

Rendering:
  - Font: 14px monospace, white
  - Subtle dark background pill behind the text
  - Alpha controlled by timer
```

Constants:
- `ROOM_NAME_FADE_IN = 20`
- `ROOM_NAME_HOLD = 120`
- `ROOM_NAME_FADE_OUT = 30`

### 8. Notification System

Notifications appear on the left side, above the ability bar. They slide up and fade out. Only one notification shows at a time; extras are queued.

```
Notification types and colors:
  - "info":    white text, no special styling
  - "ability": cyan (#22d3ee) text, "✦" prefix
  - "gate":    amber (#fbbf24) text, "⬡" prefix
  - "item":    green (#4ade80) text, "◆" prefix
  - "warning": red (#ef4444) text, "⚠" prefix

Timing per notification:
  - Fade in: 10 frames
  - Hold: 90 frames (1.5s)
  - Fade out: 20 frames
  - Total: 120 frames (2s)
  - 10-frame gap between notifications
```

Constants:
- `NOTIFICATION_FADE_IN = 10`
- `NOTIFICATION_HOLD = 90`
- `NOTIFICATION_FADE_OUT = 20`
- `NOTIFICATION_GAP = 10`

### 9. Pause Menu

When ESC is pressed, the game pauses. The HUD renders a dark overlay with a centered menu.

```
Design:
  ┌────────────────────────────────────────┐
  │         (dim overlay 70% black)        │
  │                                         │
  │              ╔═══════════╗             │
  │              ║  PAUSED   ║             │
  │              ╠═══════════╣             │
  │              ║           ║             │
  │              ║ > Resume  ║             │ ← selected item highlighted
  │              ║   Quit    ║             │
  │              ║           ║             │
  │              ╚═══════════╝             │
  │                                         │
  └────────────────────────────────────────┘

  - Dark overlay: rgba(0, 0, 0, 0.7) full canvas
  - Menu box: 200×120 centered, dark gray (#1a1a1a) with border (#4b5563)
  - Title: "PAUSED" in 20px white, centered
  - Options: "Resume" and "Quit" in 14px, selected = white + ">" prefix, unselected = gray
  - Up/Down arrows navigate, Enter/Space/ESC confirms
  - ESC while paused = resume
```

**Pause input handling:**
- `InputAction.Pause` (new action) bound to `Escape` key
- When paused, `update()` returns early (don't advance game state)
- `handlePauseInput()` returns `"resume"` or `"quit"` when the player selects an option
- The test page checks the return value and acts accordingly

**IMPORTANT: Add `InputAction.Pause` and `Escape` key binding to InputManager.** This is a minimal addition (one constant + one key binding entry in `DEFAULT_KEY_MAP`).

### 10. InputManager Addition

Add to `src/engine/input/InputManager.ts`:

```typescript
// Add to InputAction constants:
export const InputAction = {
  // ... existing actions ...
  Pause: "Pause",
} as const;

// Add to DEFAULT_KEY_MAP:
"Escape": InputAction.Pause,
```

This is the ONLY modification to an existing engine file (besides the `src/engine/ui/index.ts` barrel export).

### 11. Test Page (`/test/hud`)

A test page that demonstrates the full HUD system. It creates a small playable sandbox with all systems wired up, plus the HUD overlay.

**Test page architecture:**
- Small level (960×540, single screen)
- Player with full movement
- 3 target dummies for combat
- All 4 abilities available (mock setups — MarginStitch with a wall pair, Redaction with obstacles, PasteOver with surface platforms, IndexMark for mark placement)
- Day/night cycle running (accelerated: 30s cycle for quick testing)
- Combat system with both weapons
- Health system with damage from a simple hazard (spike strip on the floor)
- GameHUD rendering on top

**Debug panel:**

1. **HUD Config** (expanded):
   | Toggle | Default |
   |--------|---------|
   | Show Health | true |
   | Show Abilities | true |
   | Show Weapon | true |
   | Show Clock | true |
   | Show Room Name | true |
   | Show Notifications | true |
   | Show Minimap | false (no world graph in this test page) |

2. **HUD Actions**:
   - [Show Room Name] button — triggers `hud.showRoomName("Test Chamber")`
   - [Notify: Info] button — triggers `hud.notify("Test notification", "info")`
   - [Notify: Ability] button — triggers `hud.notify("Margin Stitch unlocked!", "ability")`
   - [Notify: Gate] button — triggers `hud.notify("Gate opened!", "gate")`
   - [Notify: Item] button — triggers `hud.notify("Ink Card found", "item")`
   - [Notify: Warning] button — triggers `hud.notify("Low health!", "warning")`

3. **Day/Night**:
   - Cycle speed slider (0.5–10.0, default 4.0)
   - Skip to phase buttons

4. **Player Params** (collapsed):
   - Standard movement sliders

5. **Pass Criteria** (bottom):
   - Checklist

**Level setup for the test page:**
- Floor with a spike strip in the center (damages player — tests health display)
- Left wall + right wall (for MarginStitch target pair)
- A few obstacles (for Redaction targets)
- Surface platforms: one bouncy, one icy (for PasteOver)
- 3 target dummies spread across the level (for combat)
- Generous space for movement

### 12. Update `src/engine/ui/index.ts`

Replace the empty barrel export with real exports:

```typescript
export { GameHUD } from "./GameHUD";
export type { GameHUDConfig, GameHUDSystems, HUDNotification, NotificationType, PauseAction } from "./GameHUD";
```

## Files to Create

1. **`src/engine/ui/GameHUD.ts`** — Main HUD class with all rendering logic
2. **`src/app/test/hud/page.tsx`** — HUD test page with full system demo

## Files to Modify

3. **`src/engine/ui/index.ts`** — Replace empty barrel with GameHUD exports
4. **`src/engine/input/InputManager.ts`** — Add `Pause` action and `Escape` key binding
5. **`src/lib/testStatus.ts`** — Add HUD test page entry: `{ name: "HUD & UI", path: "/test/hud", phase: 6, phaseName: "Integration", status: "in-progress", description: "In-game HUD, ability bar, and pause menu" }`
6. **`AGENTS.md`** — Add GameHUD documentation section

## Specific Values & Constants

| Constant | Value | Notes |
|----------|-------|-------|
| HP bar position | (16, 12) | Top-left |
| HP bar size | 120×12 px | Width × height |
| HP damage flash | 6 frames | White flash on hit |
| HP low pulse rate | 4 Hz | When health === 1 |
| Ability slot size | 40×52 px | Per ability |
| Ability slot spacing | 4 px | Between slots |
| Ability bar position | (16, canvasH - 56) | Bottom-left |
| Ability icon size | 24×24 px | Within the slot |
| Weapon indicator position | (canvasW/2 - 40, canvasH - 56) | Bottom-center |
| Clock position | (canvasW - 136, 12) | Top-right |
| Room name position | (canvasW - 16, canvasH - 40) | Bottom-right, right-aligned |
| Room name fade in | 20 frames | ~0.33s |
| Room name hold | 120 frames | 2s |
| Room name fade out | 30 frames | 0.5s |
| Notification position | (16, canvasH - 100) | Above ability bar |
| Notification fade in | 10 frames | |
| Notification hold | 90 frames | 1.5s |
| Notification fade out | 20 frames | |
| Pause overlay alpha | 0.7 | Dark dim |
| Pause menu size | 200×120 px | Centered |
| Cooldown sweep direction | Top to bottom | Dark overlay sweeps down |

## Implementation Notes

1. **GameHUD is a pure engine class.** No React imports. It takes a `CanvasRenderingContext2D` in its `render()` method. The test page passes `ctx` from the engine's render callback. It lives in `src/engine/ui/` alongside the empty index file.

2. **Null-safe system references.** Every system in `GameHUDSystems` can be null (except `input`). The HUD checks for null before rendering each section. This means the HUD works in test pages that only have a subset of systems — e.g., a combat test page can show health + weapon + abilities without needing day/night.

3. **The HUD renders in screen-space.** It's called AFTER the camera transform is reset (after `ctx.restore()`). All coordinates are relative to the canvas, not the world. This is the same approach used by `DayNightRenderer` for the clock HUD.

4. **Cooldown sweep animation.** For ability slots, the cooldown is rendered as a semi-transparent dark rectangle that covers the slot from top to bottom, proportional to remaining cooldown. When cooldown is 100%, the full slot is dark. When 0%, the slot is clear. This is a standard game UI pattern.

5. **Ability cooldown reading.** Each ability class exposes `cooldownTimer` as a public property. The HUD reads these directly. For the cooldown ratio, the HUD needs to know the max cooldown too. Read from the ability's params:
   - MarginStitch: `cooldownTimer / params.stitchCooldown` (seconds)
   - Redaction: `cooldownTimer / params.redactionCooldown` (seconds)
   - PasteOver: `cooldownTimer / params.pasteCooldown` (seconds)
   - IndexMark: `cooldownTimer / params.teleportCooldown` (seconds)

6. **Pause state management.** `GameHUD.paused` is a public boolean. The test page checks it at the start of the update loop and skips game updates when true. The HUD's `checkPause()` method toggles the pause state when ESC is pressed (using `input.isPressed(InputAction.Pause)`). The `handlePauseInput()` method handles menu navigation while paused and returns the selected action.

7. **Don't add `InputAction.Pause` to the input buffer.** The Pause action should be checked with `isPressed()` only, never buffered. The InputManager already handles this correctly — `consumeBufferedInput()` is separate from `isPressed()`. Just add the action constant and key binding; no buffering changes needed.

8. **Notification queue is FIFO.** New notifications are pushed to the end. The front notification displays until its timer expires, then the next one starts. Maximum 5 queued notifications (extras are dropped).

9. **The test page creates mock ability instances.** Since abilities need TileMaps and obstacles to work properly, the test page creates them with appropriate level geometry. This is the same pattern as existing ability test pages — the HUD test page is a mini integration sandbox.

10. **Font choices.** Use `ctx.font = "10px monospace"` for small labels (keybinds, counts), `"12px monospace"` for body text (notifications, HP count), `"14px monospace"` for room names and menu items, `"20px monospace"` for the pause title. Monospace fits the game's manuscript/library aesthetic.

## Pass Criteria

1. **Health bar renders:** HP bar appears top-left with correct fill proportional to current health
2. **Health damage flash:** Taking damage causes a brief white flash on the health bar
3. **Health low pulse:** At 1 HP, the health bar pulses between red and orange
4. **Ability bar renders:** Four ability slots appear bottom-left with keybind labels
5. **Ability cooldown overlay:** Using an ability shows a dark sweep over its slot that clears as cooldown expires
6. **Ability active count:** Active count dots update when abilities are activated (e.g., redaction shows 1/2 dots)
7. **Weapon indicator renders:** Current weapon shown bottom-center with icon
8. **Weapon switch works:** Pressing K switches the weapon indicator
9. **Clock renders:** Day/night clock appears top-right with phase name and time
10. **Clock updates:** The clock progresses as the day/night cycle advances
11. **Room name display:** Clicking "Show Room Name" button fades in the room name, holds, then fades out
12. **Notifications work:** Clicking notification buttons shows colored messages that fade in and out
13. **Notification queue:** Rapid notification triggers queue them properly (one at a time)
14. **Pause menu works:** Pressing ESC shows pause overlay with Resume/Quit options
15. **Pause navigation:** Up/Down arrows move selection, Enter/ESC confirms
16. **Resume from pause:** Selecting Resume or pressing ESC unpauses the game
17. **HUD toggles work:** Toggling each HUD element in the debug panel shows/hides that element
18. **Null-safe rendering:** If a system is set to null, the HUD gracefully skips that element (no errors)
19. **No regressions:** Existing test pages work unchanged (new InputAction.Pause doesn't break anything)
20. **TypeScript strict:** `npx tsc --noEmit` passes

## Verification

- [ ] `npx tsc --noEmit` passes
- [ ] `npm run build` succeeds
- [ ] Navigate to `/test/hud` — canvas renders with player, dummies, hazards, and full HUD overlay
- [ ] Health bar shows correct HP, flashes on damage, pulses at low HP
- [ ] Ability slots show cooldowns and active counts correctly
- [ ] Weapon indicator shows and switches correctly
- [ ] Day/night clock shows and updates
- [ ] Room name fades in/out correctly
- [ ] Notifications display with correct colors and timing
- [ ] ESC opens pause menu, Resume/Quit work
- [ ] All debug panel toggles work
- [ ] No regressions on existing test pages
- [ ] FPS stays at ~60 with full HUD rendering

---

## Implementation Summary

### Files Created
- **`src/engine/ui/GameHUD.ts`** — Main GameHUD class (~480 lines). Pure engine class with no React dependencies. Implements health bar, ability bar (4 slots with cooldown sweep overlays and active count dots), weapon indicator, day/night clock, room name display, notification system, and pause menu. All rendering is screen-space canvas drawing. Null-safe — gracefully skips elements when systems are unavailable.
- **`src/app/test/hud/page.tsx`** — HUD test page (~440 lines). Full integration sandbox with player, combat system, all 4 abilities, day/night cycle, spike hazards, 3 target dummies. Debug panel with HUD element toggles, notification buttons, day/night phase skip, cycle speed slider.

### Files Modified
- **`src/engine/input/InputManager.ts`** — Added `Pause: "pause"` to `InputAction` constants and `Escape: InputAction.Pause` to `DEFAULT_KEY_MAP`.
- **`src/engine/ui/index.ts`** — Replaced empty barrel export with `GameHUD` class and type exports.
- **`src/lib/testStatus.ts`** — Added HUD test page entry: `{ name: "HUD & UI", path: "/test/hud", phase: 6, phaseName: "Integration", status: "in-progress" }`.
- **`AGENTS.md`** — Updated Phase 6 table (HUD status → In progress), added GameHUD System documentation section.

### What Was Built
- **Health bar**: Top-left, 120x12px red bar with dark-red background, white damage flash (6 frames), red/orange pulse at 1 HP, HP text below
- **Ability bar**: Bottom-left, 4 slots with keybind labels (E/Q/R/R), canvas-drawn ability icons (stitch=bridge lines, redaction=black rect+red X, paste-over=stamp, index mark=bookmark), cooldown sweep overlays (top-to-bottom dark sweep), active count dots
- **Weapon indicator**: Bottom-center, quill-spear (diagonal line with pointed tip) or ink-snap (starburst), weapon name, `[K]` switch hint, flash on attack
- **Day/night clock**: Top-right, sun/moon icon, phase name + elapsed time, progress bar colored by phase
- **Room name display**: Bottom-right pill, 20f fade-in → 120f hold → 30f fade-out
- **Notification system**: Left side above ability bar, 5 types (info/ability/gate/item/warning) with colors and Unicode prefixes, FIFO queue (max 5), 10f fade-in → 90f hold → 20f fade-out
- **Pause menu**: ESC toggles pause, 70% dark overlay, centered 200x120px menu box with "PAUSED" title, Resume/Quit options with arrow navigation, Jump/Attack confirm, ESC also resumes

### Verification
- `npx tsc --noEmit` passes with zero errors
- `npm run build` succeeds, `/test/hud` route included in build output
- No regressions — all existing test pages unaffected by the new `InputAction.Pause` addition
